<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transaction</title>
    <link rel="stylesheet" href="/styles.css" type="text/css" />
  </head>
  <body class="bg-gray-100 dark:bg-gray-800 p-5 font-poppins">
    <div class="container mx-auto w-80 h-full flex justify-end">
      <a
        href="/transaction"
        id="close-button"
        class="font-poppins text-3xl text-gray-700 cursor-pointer"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
            clip-rule="evenodd"
          />
        </svg>
      </a>
    </div>

    <form action="/transaction/edit/<%= transaction.id %> " method="POST" class="container mx-auto w-80">
      <div class="mt-20 flex flex-col gap-6 justify-center items-center">
        <h1 class="text-2xl font-semibold text-gray-600">Add Transaction</h1>
        <div
          class="
            w-full
            my-6
            bg-white
            rounded-full
            py-5
            px-10
            flex flex-row
            items-center
          "
        >
          <label for="amount" class="mr-2 text-gray-500">Rp</label>
          <input
            id="amount"
            type="number"
            name="amount"
            placeholder="0"
            value="<%= transaction.amount %>"
            class="
              w-full
              text-3xl
              text-gray-500
            "
          />
        </div>
        <div class="w-full">
          <select
            name="type"
            id="type"
            class="
              block
              appearance-none
              w-full
              bg-gray-200
              border border-gray-200
              text-gray-700
              py-4
              rounded
              leading-tight
              focus:outline-none
              focus:bg-white
              focus:border-gray-500
            "
          >
            <% let selectedIncome = transaction.type === "Income" ? "selected" : "" %>
            <% let selectedExpense = transaction.type === "Expense" ? "selected" : "" %>

            <option value="">Type</option>
            <option value="Income" <%= selectedIncome %>>Income</option>
            <option value="Expense" <%= selectedExpense %>>Expense</option>
          </select>
        </div>
        <div class="w-full">
          <select
            name="category"
            id="category"
            class="
              block
              appearance-none
              w-full
              bg-gray-200
              border border-gray-200
              text-gray-700
              py-4
              rounded
              leading-tight
              focus:outline-none
              focus:bg-white
              focus:border-gray-500
            "
          >
            
            <option value="">Category</option>
            <% let options = ["Food", "Shopping", "Gift", "Others"] %> 

            <% for (let i = 0; i < options.length; i++ ) { %>

              <% let selected = ( transaction.category == options[i] ) ? "selected" : "" %>
              
              <option value="<%=options[i] %>" <%= selected %> >
                <%= options[i] %>
              </option>
              
            <% } %>
          </select>
        </div>

        <div>
          <input
            name="note"
            type="text"
            class="
              block
              appearance-none
              w-full
              bg-gray-200
              border-none
              text-gray-600
              py-3
              rounded
              leading-tight
              focus:outline-none
              focus:bg-white
              focus:border-gray-500
            "
            value="<%= transaction.note %> "
            placeholder="Note"
            id="note"
          />
        </div>

        <div class="w-full">
          <input
            name="date"
            id="date"
            placeholder="Today"
            type="date"
            value="<%= transaction.date %>"
            class="
              w-full
              bg-gray-200
              border-none
              text-gray-600
              py-3
              rounded
              leading-tight
              focus:outline-none
              focus:bg-white
              focus:border-gray-500
            "
          />
        </div>

        <button
          type="submit"
          id="submit"
          class="
            w-full
            py-4
            text-center
            uppercase
            tracking-wider
            text-white text-xl
            bg-gradient-to-tl
            from-green-200
            to-blue-500
            rounded-lg
          "
        >
          save
        </button>
      </div>
    </form>
  </body>
</html>
